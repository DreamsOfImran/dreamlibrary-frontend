(this["webpackJsonpdreamlibrary-frontend"]=this["webpackJsonpdreamlibrary-frontend"]||[]).push([[0],{42:function(e,a,t){e.exports=t(83)},49:function(e,a,t){},83:function(e,a,t){"use strict";t.r(a);t(43),t(44),t(45),t(48),t(49);var n=t(0),l=t.n(n),r=t(12),c=t.n(r),o=t(4),m=t(6),s=t.n(m),i=(t(71),t(14)),u=t(15),d=t(16),E=t(23),b=t.n(E),p=t(37),v=t(5);var g=Object(u.b)((function(e){return{state:e}}))((function(e){var a=Object(n.useState)(""),t=Object(v.a)(a,2),r=t[0],c=t[1],m=Object(n.useState)(""),i=Object(v.a)(m,2),u=i[0],d=i[1],E=function(){var a=Object(p.a)(b.a.mark((function a(t){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.preventDefault(),s.a.post("/auth/login",{email:r,password:u}).then((function(a){e.dispatch({type:"LOGIN_USER",payload:a.data}),e.history.push("/")})).catch((function(e){e.response?console.log(e.response.data):console.log(e)}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"sidenav"},l.a.createElement("div",{className:"login-main-text"},l.a.createElement("h2",null,"Application",l.a.createElement("br",null)," Login Page"),l.a.createElement("p",null,"Login or register from here to access."))),l.a.createElement("div",{className:"main"},l.a.createElement("div",{className:"col-md-6 col-sm-12"},l.a.createElement("div",{className:"login-form"},l.a.createElement("form",{onSubmit:E},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Email"),l.a.createElement("input",{type:"email",name:"email",className:"form-control",placeholder:"Email",required:!0,value:r,onChange:function(e){return c(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Password"),l.a.createElement("input",{type:"password",name:"password",className:"form-control",placeholder:"Password",required:!0,value:u,onChange:function(e){return d(e.target.value)}})),l.a.createElement("button",{type:"submit",className:"btn btn-black"},"Login"))),l.a.createElement(o.b,{to:"/register",className:"text-decoration-none"},"Don't have an account, Sign up"))))})),f=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"sidenav"},l.a.createElement("div",{className:"login-main-text"},l.a.createElement("h2",null,"Application",l.a.createElement("br",null)," Login Page"),l.a.createElement("p",null,"Login or register from here to access."))),l.a.createElement("div",{className:"main"},l.a.createElement("div",{className:"col-md-6 col-sm-12"},l.a.createElement("div",{className:"login-form"},l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"First Name"),l.a.createElement("input",{type:"text",name:"first_name",className:"form-control",placeholder:"First Name",required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Last Name"),l.a.createElement("input",{type:"text",name:"last_name",className:"form-control",placeholder:"Last Name",required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Email"),l.a.createElement("input",{type:"email",name:"email",className:"form-control",placeholder:"Email",required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Password"),l.a.createElement("input",{type:"password",name:"password",className:"form-control",placeholder:"Password",required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Confirm Password"),l.a.createElement("input",{type:"password",name:"confirm_password",className:"form-control",placeholder:"Confirm Password",required:!0})),l.a.createElement("button",{type:"submit",className:"btn btn-black"},"Register"))),l.a.createElement(o.b,{to:"/login",className:"text-decoration-none"},"Already have an account, Sign in"))))},h=t(40),N=function(){return l.a.createElement(h.a,{autoPlay:!0,showThumbs:!1,infiniteLoop:!0},l.a.createElement("div",null,l.a.createElement("img",{src:"https://placeimg.com/640/340/any?1",className:"vh-100",alt:"carousel"})),l.a.createElement("div",null,l.a.createElement("img",{src:"https://placeimg.com/640/340/any?2",className:"vh-100",alt:"carousel"})),l.a.createElement("div",null,l.a.createElement("img",{src:"https://placeimg.com/640/340/any?3",className:"vh-100",alt:"carousel"})))},y=function(e){return l.a.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6 col-xs-12 my-4"},l.a.createElement("div",{className:"hovereffect"},l.a.createElement("img",{className:"img-responsive",src:e.image_url,alt:"",style:{height:"350px"}}),l.a.createElement("div",{className:"overlay"},l.a.createElement(o.b,{to:"/book/"+e._id},l.a.createElement("h2",null,e.title)),e.status?l.a.createElement("a",{className:"info",href:"/book/"+e._id},"Remove from cart"):l.a.createElement("a",{className:"info",href:"/book/"+e._id},"Add to cart"))))},k=function(e){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row my-4"},e.books.map((function(e){return l.a.createElement(y,Object.assign({key:e._id},e))}))))},O=function(e){var a=Object(n.useState)([]),t=Object(v.a)(a,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){s.a.get("/book/list").then((function(e){c(e.data.books)}))}),[]),l.a.createElement("div",null,l.a.createElement(N,null),l.a.createElement("div",{className:"container"},l.a.createElement("h1",{className:"text-center"},"Latest Collections"),l.a.createElement(k,{books:r})))},j=function(){var e=Object(n.useState)([]),a=Object(v.a)(e,2),t=a[0],r=a[1];Object(n.useEffect)((function(){s.a.get("/book/list").then((function(e){r(e.data.books)}))}),[]);return l.a.createElement("div",{className:"container my-5"},l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("h2",{className:"pt-4"},"Books List"),l.a.createElement(o.b,{to:"/admin/books/new",className:"btn btn-black my-auto"},"+ Add Book")),l.a.createElement("table",{className:"table"},l.a.createElement("thead",{className:"thead-dark"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"#"),l.a.createElement("th",{scope:"col"},"Title"),l.a.createElement("th",{scope:"col"},"Author"),l.a.createElement("th",{scope:"col"},"Category"),l.a.createElement("th",{scope:"col"},"Actions"))),l.a.createElement("tbody",null,t.map((function(e,a){return l.a.createElement("tr",{key:e._id},l.a.createElement("th",{scope:"row"},a+1),l.a.createElement("td",null,e.title),l.a.createElement("td",null,e.author),l.a.createElement("td",null,e.category),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-link text-decoration-none",onClick:function(){return a=e._id,void console.log(a);var a}},"Edit")," | ",l.a.createElement("button",{className:"btn btn-link text-decoration-none text-danger",onClick:function(){return a=e._id,void s.a.delete("/book/remove/"+a).then((function(e){var n;(null===(n=e.data)||void 0===n?void 0:n.success)&&(r(t.filter((function(e){return e._id!==a}))),d.a.warn("Book is removed from database!"))}));var a}},"Delete")))})))))},w=t(41),S=function(e){var a,t;return l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light fixed-top"},l.a.createElement("div",{className:"container"},l.a.createElement(o.c,{className:"navbar-brand",to:"/"},"Dream Library"),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo02","aria-controls":"navbarTogglerDemo02","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo02"},l.a.createElement("ul",{className:"navbar-nav mr-auto mt-2 mt-lg-0"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(o.c,{className:"nav-link",exact:!0,to:"/",activeClassName:"active"},"Home")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(o.c,{className:"nav-link",to:"/book",activeClassName:"active"},"Books")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(o.c,{className:"nav-link disabled",to:"/authors",activeClassName:"active"},"Authors"))),l.a.createElement("ul",{className:"navbar-nav my-2 my-lg-0"},(null===(a=e.user)||void 0===a?void 0:a.is_admin)?l.a.createElement("li",{className:"nav-item active dropdown"},l.a.createElement(o.c,{className:"nav-link dropdown-toggle",to:"/",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Admin Panel"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},l.a.createElement(o.c,{className:"dropdown-item",to:"/admin/books"},"Books"),l.a.createElement("a",{className:"dropdown-item",href:"#"},"Categories"),l.a.createElement("div",{className:"dropdown-divider"}),l.a.createElement("a",{className:"dropdown-item",href:"#"},"Users"))):null,l.a.createElement("li",{className:"nav-item active"},l.a.createElement(o.c,{className:"nav-link",to:"/cart"},l.a.createElement(w.a,null)," Cart")),l.a.createElement("li",{className:"nav-item active"},l.a.createElement(o.c,{className:"nav-link",to:"/login"},null===(t=e.user)||void 0===t?void 0:t.first_name))))))},_=function(e){var a=Object(n.useState)(""),t=Object(v.a)(a,2),r=t[0],c=t[1],o=Object(n.useState)(""),m=Object(v.a)(o,2),i=m[0],u=m[1],d=Object(n.useState)(""),E=Object(v.a)(d,2),b=E[0],p=E[1],g=Object(n.useState)((new Date).toISOString().slice(0,10)),f=Object(v.a)(g,2),h=f[0],N=f[1],y=Object(n.useState)(""),k=Object(v.a)(y,2),O=k[0],j=k[1],w=Object(n.useState)(""),S=Object(v.a)(w,2),_=S[0],C=S[1],x=Object(n.useState)(""),A=Object(v.a)(x,2),q=A[0],F=A[1],P=Object(n.useState)(""),L=Object(v.a)(P,2),I=L[0],B=L[1];return l.a.createElement("div",{className:"container my-5"},l.a.createElement("h1",null,"Add New Book Page"),l.a.createElement("form",{onSubmit:function(a){a.preventDefault(),s.a.post("/book/new",{title:r,author:i,isbn:b,published_on:h,image_url:O,category:_,summary:q,quantity:I}).then((function(a){e.history.goBack()})).catch((function(e){console.log(e)}))}},l.a.createElement("fieldset",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"bookTitle"},"Title"),l.a.createElement("input",{type:"text",name:"title",className:"form-control",id:"bookTitle",placeholder:"Title",value:r,required:!0,onChange:function(e){return c(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"bookAuthor"},"Author Name"),l.a.createElement("input",{type:"text",name:"author",className:"form-control",id:"bookAuthor",placeholder:"Author Name",value:i,required:!0,onChange:function(e){return u(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"bookISBN"},"ISBN"),l.a.createElement("input",{type:"text",name:"isbn",className:"form-control",id:"bookISBN",placeholder:"ISBN",value:b,required:!0,onChange:function(e){return p(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"bookPublishedOn"},"Published On"),l.a.createElement("input",{type:"date",name:"published_on",className:"form-control",id:"bookPublishedOn",placeholder:"Published On",value:h,required:!0,onChange:function(e){return N(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"bookImage"},"Cover Image URL"),l.a.createElement("input",{type:"url",name:"image_url",className:"form-control",id:"bookImage",placeholder:"Cover Image URL",value:O,required:!0,onChange:function(e){return j(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"bookCategory"},"Category"),l.a.createElement("select",{className:"form-control",id:"bookCategory",name:"category",required:!0,onChange:function(e){return C(e.target.value)},value:_},l.a.createElement("option",{disabled:!0,value:""},"Select Category"),l.a.createElement("option",{value:"Fiction"},"Fiction"),l.a.createElement("option",{value:"Non-fiction"},"Non-fiction"),l.a.createElement("option",{value:"Action"},"Action"),l.a.createElement("option",{value:"Autobiography"},"Autobiography"),l.a.createElement("option",{value:"Fantasy"},"Fantasy"))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"bookSummary"},"Summary"),l.a.createElement("textarea",{className:"form-control",name:"summary",id:"bookSummary",rows:"3",value:q,required:!0,onChange:function(e){return F(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"bookQuantity"},"Quantity"),l.a.createElement("input",{type:"number",name:"quantity",className:"form-control",id:"bookQuantity",placeholder:"Quantity",value:I,required:!0,onChange:function(e){return B(e.target.value)}})),l.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))))},C=function(e){var a=Object(n.useState)({}),t=Object(v.a)(a,2),r=t[0],c=t[1],o=Object(n.useState)(!1),m=Object(v.a)(o,2),i=m[0],u=m[1];Object(n.useEffect)((function(){s.a.get("/book/"+e.match.params.id).then((function(a){c(a.data.book),s.a.get("/book/status/"+e.match.params.id).then((function(e){u(e.data.cart)}))}))}),[]);return l.a.createElement("div",{className:"container my-5"},l.a.createElement("h1",{className:"py-4"},r.title),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("img",{className:"img-fluid",src:r.image_url,alt:""})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h3",{className:"my-3"},"Summary"),l.a.createElement("p",null,r.summary),l.a.createElement("h3",{className:"my-3"},"Details"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("b",null,"Author: "),r.author),l.a.createElement("li",null,l.a.createElement("b",null,"Category: "),r.category),l.a.createElement("li",null,l.a.createElement("b",null,"ISBN: "),r.isbn),l.a.createElement("li",null,l.a.createElement("b",null,"Published on: "),r.published_on)),i?l.a.createElement("button",{className:"btn btn-dark",onClick:function(){var e;e=r._id,s.a.delete("/cart/remove/"+e).then((function(e){var a,t;return d.a.success(null===(a=e.data)||void 0===a?void 0:a.message),null===(t=e.data)||void 0===t?void 0:t.success})),u(!1)}},"Remove from cart"):l.a.createElement("button",{className:"btn btn-dark",onClick:function(){var e;e=r._id,s.a.post("/cart/add",{book_id:e}).then((function(e){var a,t;return d.a.success(null===(a=e.data)||void 0===a?void 0:a.message),null===(t=e.data)||void 0===t?void 0:t.success})),u(!0)}},"Add to cart"))))};d.a.configure();var x=function(){var e=Object(i.f)(),a=Object(i.g)(),t=Object(u.d)((function(e){var a=e.auth;return{isAuthorized:null!=a.token,user:a.user}}),u.c),r=t.isAuthorized,c=t.user;return Object(n.useEffect)((function(){!r||"/login"!==a.pathname&&"/register"!==a.pathname||e.push("/")}),[r,e,a.pathname]),l.a.createElement(l.a.Fragment,null,"/login"===a.pathname||"/register"===a.pathname?null:l.a.createElement(S,{user:c}),l.a.createElement(i.c,null,r?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,{path:"/login",component:g}),l.a.createElement(i.a,{path:"/register",component:f})),l.a.createElement(i.a,{path:"/",exact:!0,component:O}),l.a.createElement(i.a,{path:"/book/:id",component:C}),l.a.createElement(i.a,{path:"/admin/books/new",component:_}),l.a.createElement(i.a,{path:"/admin/books",component:j})))};var A=t(13),q={user:void 0,token:void 0};var F=Object(A.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOGIN_USER":return{token:a.payload.token,user:a.payload.user};default:return e}}}),P=t(39),L=t.n(P);var I=function(e){var a=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||A.d;return Object(A.e)(F,e,a(Object(A.a)(L()())))}(function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(a){return}}());I.subscribe((function(){!function(e){try{var a=JSON.stringify(e);localStorage.setItem("state",a)}catch(t){}}(I.getState())})),function(e,a){e.defaults.baseURL="https://dreamlibrary-api.herokuapp.com",e.defaults.headers.Accept="application/json",e.interceptors.request.use((function(e){var t=a.getState().auth;return t.token&&(e.headers.Authorization="Bearer ".concat(t.token)),e}),(function(e){return Promise.reject(e)}))}(s.a,I),c.a.render(l.a.createElement(u.a,{store:I},l.a.createElement(o.a,null,l.a.createElement(x,null))),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.6af3f0b6.chunk.js.map